# Monitoring Stack Configuration
# Prometheus + Grafana + Loki + Promtail + Uptime Kuma

# ============================================================================
# USER/GROUP & TIMEZONE
# ============================================================================
PUID=1000
PGID=1000
TZ=Europe/Amsterdam

# ============================================================================
# HOST DIRECTORY LAYOUT
# ============================================================================
CONFIG_ROOT=/srv/orion-sentinel-core/config
DATA_ROOT=/srv/orion-sentinel-core/data
MONITORING_ROOT=/srv/orion-sentinel-core/monitoring

# Directory structure:
# /srv/orion-sentinel-core/monitoring/
#   ├── prometheus/
#   │   ├── prometheus.yml        # Config
#   │   └── data/                 # Time-series data
#   ├── loki/
#   │   ├── config.yml            # Config
#   │   └── data/                 # Log data
#   ├── promtail/
#   │   └── config.yml            # Config
#   └── grafana/
#       ├── provisioning/         # Auto-config
#       ├── dashboards/           # Dashboard JSONs
#       └── data/                 # Grafana database

# ============================================================================
# PROMETHEUS
# ============================================================================
# Prometheus scrapes metrics from all services across the home lab

# Retention period for metrics (default: 15 days)
PROMETHEUS_RETENTION_TIME=15d

# Storage size limit
PROMETHEUS_RETENTION_SIZE=10GB

# ============================================================================
# GRAFANA
# ============================================================================
# Admin credentials (CHANGE THESE!)
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=change_me_to_a_strong_password

# Security settings
GF_SECURITY_ALLOW_EMBEDDING=true
# Allows embedding in Homepage dashboard

# Anonymous access (set to true for LAN-only access without login)
GF_AUTH_ANONYMOUS_ENABLED=false

# Server settings
GF_SERVER_ROOT_URL=https://grafana.local
GF_SERVER_DOMAIN=grafana.local

# ============================================================================
# LOKI
# ============================================================================
# Log retention (default: 7 days)
# Adjust based on available disk space
LOKI_RETENTION_PERIOD=168h  # 7 days

# ============================================================================
# PROMTAIL
# ============================================================================
# Promtail collects Docker logs and sends them to Loki
# No additional config needed here; configured via promtail/config.yml

# ============================================================================
# UPTIME KUMA
# ============================================================================
# Uptime Kuma monitors service availability across the home lab

# Services to monitor (configure in UI after startup):
# - CoreSrv services (Jellyfin, *arr, Nextcloud, etc.)
# - Pi DNS services (Pi-hole, Unbound)
# - Pi NetSec services (Orion Sentinel)
# - External endpoints (internet connectivity)

# ============================================================================
# TODO: Production Deployment
# ============================================================================
# For production, consider:
# 1. Use Docker secrets instead of plain env variables for passwords
# 2. Set up remote storage for Loki (S3, GCS, etc.) for better retention
# 3. Enable Grafana SMTP for alerting
# 4. Configure Prometheus Alertmanager for alert routing
# 5. Set up proper backup strategy for Grafana dashboards and Prometheus data
