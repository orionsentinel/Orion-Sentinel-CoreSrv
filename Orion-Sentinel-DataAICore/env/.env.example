# ============================================================================
# Orion-Sentinel-DataAICore - Environment Configuration
# ============================================================================
#
# Copy this file to .env and customize for your deployment.
#   cp env/.env.example .env
#
# The setup.sh script will copy this file and generate secure secrets automatically.
#
# ============================================================================

# ============================================================================
# SYSTEM SETTINGS
# ============================================================================

# User and Group IDs
# Find yours with: id
PUID=1000
PGID=1000

# Timezone
# List: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
TZ=Europe/Amsterdam

# Hostname for URL construction
HOSTNAME=dataaicore

# ============================================================================
# STORAGE CONFIGURATION
# ============================================================================

# Data root directory
# All application data will be stored under this directory
DATA_ROOT=/srv/dataaicore

# ============================================================================
# NEXTCLOUD (Profile: nextcloud)
# ============================================================================

# Admin credentials (only used on first run)
NEXTCLOUD_ADMIN_USER=admin
NEXTCLOUD_ADMIN_PASSWORD=CHANGE_ME_GENERATED_BY_SETUP

# Trusted domains (space or comma separated)
# Add your server's IP address and domain name
NEXTCLOUD_TRUSTED_DOMAINS=localhost 192.168.1.100

# Database credentials
NEXTCLOUD_DB_NAME=nextcloud
NEXTCLOUD_DB_USER=nextcloud
NEXTCLOUD_DB_PASSWORD=CHANGE_ME_GENERATED_BY_SETUP

# Redis password
NEXTCLOUD_REDIS_PASSWORD=CHANGE_ME_GENERATED_BY_SETUP

# Performance settings
NEXTCLOUD_PHP_MEMORY=512M
NEXTCLOUD_UPLOAD_LIMIT=10G

# ============================================================================
# SEARCH STACK (Profile: search)
# ============================================================================

# SearXNG secret key (for secure cookies)
SEARXNG_SECRET=CHANGE_ME_GENERATED_BY_SETUP

# Meilisearch master key (required for production)
MEILISEARCH_MASTER_KEY=CHANGE_ME_GENERATED_BY_SETUP

# ============================================================================
# LLM STACK (Profile: llm)
# ============================================================================

# Open WebUI signup (set to false after creating admin account)
OPEN_WEBUI_SIGNUP=true

# Ollama GPU settings
# Set to 1 if you have NVIDIA GPU, 0 for CPU-only
OLLAMA_GPU_LAYERS=0

# ============================================================================
# OPTIONAL: PUBLIC NEXTCLOUD (Profile: public-nextcloud)
# ============================================================================

# Your domain for public Nextcloud access
# Example: cloud.yourdomain.com
# Set this only if you plan to expose Nextcloud to the internet
ORION_DOMAIN=yourdomain.com

# ============================================================================
# NOTES
# ============================================================================
#
# Profile Usage:
#   - nextcloud: Nextcloud + Postgres + Redis (local access only)
#   - search: SearXNG + Valkey + Meilisearch + Tika + Local Indexer
#   - llm: Ollama + Open WebUI
#   - public-nextcloud: Adds Caddy reverse proxy for public Nextcloud access
#
# Examples:
#   ./scripts/orionctl.sh up nextcloud           # Nextcloud only
#   ./scripts/orionctl.sh up search              # Search only
#   ./scripts/orionctl.sh up llm                 # LLM only
#   ./scripts/orionctl.sh up nextcloud search llm  # Everything
#   ./scripts/orionctl.sh up nextcloud public-nextcloud  # Public Nextcloud
#
# Security:
#   - All services are LOCAL ONLY by default
#   - Exposed to LAN on 0.0.0.0:<port>
#   - NOT exposed to the internet (except when public-nextcloud profile enabled)
#   - For remote access, use VPN (WireGuard, Tailscale, etc.)
#
# Public Nextcloud Requirements (Phase 2):
#   1. Domain name (e.g., cloud.yourdomain.com)
#   2. DNS A record pointing to your public IP
#   3. Router port forwarding: 443 -> Optiplex IP
#   4. ORION_DOMAIN set in .env
#   5. Enable 2FA in Nextcloud
#
# Storage:
#   - Nextcloud data can grow large (user files)
#   - LLM models are large (3B model = ~2GB, 7B = ~4GB)
#   - Search index is relatively small
#   - Plan storage accordingly
#
# LLM Models:
#   Small (CPU-friendly):
#     docker exec -it orion_dataaicore_ollama ollama pull llama3.2:3b
#     docker exec -it orion_dataaicore_ollama ollama pull qwen2.5:3b
#   
#   Medium (requires more RAM):
#     docker exec -it orion_dataaicore_ollama ollama pull llama3.2:7b
#     docker exec -it orion_dataaicore_ollama ollama pull mistral:7b
#
# Local Document Indexing:
#   Drop PDF/TXT/MD/DOCX files into:
#     ${DATA_ROOT}/search/local-search/
#   They will be automatically indexed and searchable via SearXNG
#
# Backup:
#   - Nextcloud: Database + data directory
#   - Search: Meilisearch index (small, can rebuild)
#   - LLM: Models can be re-downloaded
#   - See INSTALL.md for backup procedures
#
# ============================================================================
