# Core Services Configuration
# Traefik v3 + Authelia (Reverse Proxy + SSO)

# ============================================================================
# USER/GROUP & TIMEZONE
# ============================================================================
PUID=1000
PGID=1000
TZ=Europe/Amsterdam

# ============================================================================
# HOST DIRECTORY LAYOUT
# ============================================================================
CONFIG_ROOT=/srv/orion-sentinel-core/config
DATA_ROOT=/srv/orion-sentinel-core/data

# ============================================================================
# DOMAIN CONFIGURATION
# ============================================================================
# Base domain for all services (e.g., local, yourdomain.com)
DOMAIN=local

# Service hostnames (all will be <name>.${DOMAIN}):
# - traefik.local     - Traefik dashboard
# - auth.local        - Authelia SSO portal
# - jellyfin.local    - Jellyfin media server
# - requests.local    - Jellyseerr
# - qbit.local        - qBittorrent
# - sonarr.local      - Sonarr
# - radarr.local      - Radarr
# - prowlarr.local    - Prowlarr
# - recommend.local   - Recommendarr
# - cloud.local       - Nextcloud
# - search.local      - SearXNG
# - grafana.local     - Grafana
# - prometheus.local  - Prometheus
# - status.local      - Uptime Kuma
# - home.local        - Homepage dashboard

# ============================================================================
# TRAEFIK CONFIGURATION
# ============================================================================
# Traefik log level (DEBUG, INFO, WARN, ERROR)
TRAEFIK_LOG_LEVEL=INFO

# Access logs (set to true for detailed request logging)
TRAEFIK_ACCESS_LOG=false

# Dashboard (enable at your own risk - should be behind Authelia)
TRAEFIK_DASHBOARD=true

# ============================================================================
# TRAEFIK ACME / LET'S ENCRYPT (Optional - for production SSL)
# ============================================================================
# Uncomment and configure when ready to use Let's Encrypt certificates

# Your email for Let's Encrypt notifications
# TRAEFIK_ACME_EMAIL=you@example.com

# DNS provider for DNS-01 challenge (recommended for wildcard certs)
# Options: cloudflare, route53, digitalocean, etc.
# See: https://doc.traefik.io/traefik/https/acme/#providers
# TRAEFIK_ACME_DNS_PROVIDER=cloudflare

# DNS provider API credentials (example for Cloudflare)
# CLOUDFLARE_EMAIL=you@example.com
# CLOUDFLARE_API_KEY=your_cloudflare_api_key

# Or use Cloudflare API Token (recommended)
# CLOUDFLARE_DNS_API_TOKEN=your_cloudflare_api_token

# For other DNS providers, see their specific env var requirements:
# https://go-acme.github.io/lego/dns/

# ============================================================================
# AUTHELIA SECRETS (CRITICAL - MUST CHANGE!)
# ============================================================================
# Generate each secret with: openssl rand -hex 32

# JWT secret for Authelia tokens
AUTHELIA_JWT_SECRET=change-me-run-openssl-rand-hex-32

# Session secret for encrypted session cookies
AUTHELIA_SESSION_SECRET=change-me-run-openssl-rand-hex-32

# Storage encryption key for database encryption
AUTHELIA_STORAGE_ENCRYPTION_KEY=change-me-run-openssl-rand-hex-32

# ============================================================================
# AUTHELIA USERS
# ============================================================================
# User database is in core/authelia/users.yml
# Generate password hashes with:
#   docker run --rm -it authelia/authelia:latest authelia crypto hash generate argon2 --password 'YourPassword'
#
# Then copy the hash into users.yml

# ============================================================================
# SECURITY NOTES
# ============================================================================
# 1. Never commit this file with real secrets to git!
# 2. Store secrets in a password manager
# 3. For production, consider using Docker secrets instead of env vars
# 4. Rotate secrets periodically (every 6-12 months)

# ACME / Let's Encrypt (for automatic SSL certificates)
# Email for Let's Encrypt notifications
ACME_EMAIL=admin@example.com

# ACME challenge type (options: http, dns)
# - http: requires port 80 accessible from internet
# - dns: requires DNS provider API (more secure, works with wildcards)
ACME_CHALLENGE_TYPE=dns

# DNS provider for DNS-01 challenge (if using dns challenge type)
# Examples: cloudflare, route53, digitalocean, etc.
# See: https://doc.traefik.io/traefik/https/acme/#providers
ACME_DNS_PROVIDER=cloudflare

# DNS provider credentials (example for Cloudflare)
# Adjust based on your DNS provider
CLOUDFLARE_EMAIL=
CLOUDFLARE_API_KEY=

# ACME staging (set to true for testing to avoid rate limits)
ACME_STAGING=true

# ============================================================================
# AUTHELIA CONFIGURATION
# ============================================================================
# Authelia provides SSO (Single Sign-On) for all services

# Secret keys (CRITICAL: Generate secure random strings!)
# Generate with: openssl rand -hex 32
AUTHELIA_JWT_SECRET=changeme_generate_with_openssl_rand_hex_32
AUTHELIA_SESSION_SECRET=changeme_generate_with_openssl_rand_hex_32
AUTHELIA_STORAGE_ENCRYPTION_KEY=changeme_generate_with_openssl_rand_hex_32

# Session domain (should match your DOMAIN)
AUTHELIA_SESSION_DOMAIN=${DOMAIN}

# Session expiration (e.g., 1h, 12h, 1d, 1w)
AUTHELIA_SESSION_EXPIRATION=12h

# Inactivity timeout
AUTHELIA_SESSION_INACTIVITY=5m

# Default redirection URL (where to go after login if no target specified)
AUTHELIA_DEFAULT_REDIRECTION_URL=https://home.${DOMAIN}

# ============================================================================
# AUTHELIA AUTHENTICATION BACKEND
# ============================================================================
# Options: file, ldap
# Default: file (simple YAML-based user database)
AUTHELIA_AUTHENTICATION_BACKEND=file

# LDAP settings (if using LDAP backend)
# Uncomment and configure if you have an LDAP server
# AUTHELIA_LDAP_URL=ldap://ldap-server:389
# AUTHELIA_LDAP_USER=cn=admin,dc=example,dc=com
# AUTHELIA_LDAP_PASSWORD=
# AUTHELIA_LDAP_BASE_DN=dc=example,dc=com

# ============================================================================
# AUTHELIA NOTIFIER (for 2FA, password resets, etc.)
# ============================================================================
# Options: filesystem, smtp
# Default: filesystem (notifications saved to files, not sent via email)
AUTHELIA_NOTIFIER_BACKEND=filesystem

# SMTP settings (if using email notifications)
# Uncomment and configure if you want email notifications
# AUTHELIA_NOTIFIER_SMTP_HOST=smtp.gmail.com
# AUTHELIA_NOTIFIER_SMTP_PORT=587
# AUTHELIA_NOTIFIER_SMTP_USERNAME=your-email@gmail.com
# AUTHELIA_NOTIFIER_SMTP_PASSWORD=
# AUTHELIA_NOTIFIER_SMTP_SENDER=authelia@example.com
